on: 
  release:
  workflow_dispatch: # Workflow will run when GitHub Action is manually triggered

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo 'The job was manually triggered by a ${{ github.event_name }} event.'
      - run: echo 'This job is now running on a ${{ runner.os }} server hosted by GitHub.'
      - run: echo 'The name of your branch is ${{ github.ref }}, and your repository is ${{ github.repository }}.'
      - name: Send 'asia' repository to Dataverse
        uses: IQSS/dataverse-uploader@v1.3
        with:
          DATAVERSE_TOKEN: ca609de4-735c-4035-925e-e5a5e09c9e56 # Per Paul's advice, need to replace personal with institutional (if wanting to send to production server, rather than staging server)
          DATAVERSE_SERVER: https://abacus.library.ubc.ca 
          DATAVERSE_DATASET_DOI: hdl:11272/AB2/XNNMLU
          GITHUB_DIR: asia
          DELETE: True
          PUBLISH: False
      - name: Send 'europe' repository to Dataverse
        uses: IQSS/dataverse-uploader@v1.3
        with:
          DATAVERSE_TOKEN: ca609de4-735c-4035-925e-e5a5e09c9e56
          DATAVERSE_SERVER: https://abacus.library.ubc.ca 
          DATAVERSE_DATASET_DOI: hdl:11272/AB2/S3CB2Q
          GITHUB_DIR: europe
          DELETE: True
          PUBLISH: False
      - name: Send 'north-america' repository to Dataverse
        uses: IQSS/dataverse-uploader@v1.3
        with:
          DATAVERSE_TOKEN: ca609de4-735c-4035-925e-e5a5e09c9e56
          DATAVERSE_SERVER: https://abacus.library.ubc.ca 
          DATAVERSE_DATASET_DOI: hdl:11272/AB2/DWEUNF
          GITHUB_DIR: north-america
          DELETE: True
          PUBLISH: False
